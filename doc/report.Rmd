---
title: "Finding peer stocks using business description"
description: |
  The article demonstrates a method for finding stock peers by text clustering on the business descriptions of securities.
author:
  - name: Rahul
    url: https://r2rahul.github.io
    affiliation: Quantitative Analyst
    affiliation_url: https://r2rahul.github.io
    orcid_id: 0000-0002-0144-1022 
date: "`r Sys.Date()`"
citation_url: https://rstudio.github.io/distill
slug: rahul2022
bibliography: biblio.bib
repository_url: https://github.com/r2rahul/thematic
creative_commons: CC BY
output:
  distill::distill_article:
    toc: true
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE, warning = FALSE, message = FALSE)
```

# Introduction
The report outlines an alternative method to find stock peers through natural language processing of business descriptions. The current market environment of high connected value chain, specialized patented products, looking into same sector peers won't give the whole picture. The report describes the novel method to find peers using text clustering using business description. The method can be used as additional method to identify peers to looking at sector peers. Traditional method to find stock peers is to look into other stocks in same sector. We identified non-sector peers [placeholder], using the method. 

In the report is organized in three sections. First we describe the methodology.  Second results. Finally, conclusions and next steps

# Methods

Since this is a methodology paper to keep the data size and computation time manageable we used EuroStoxx 50 [@stoxx50] as a universe. Furthermore, the data for this universe is available for all stocks on the Yahoo finance. 

For the technology we used python and for workflow management [@scikit, @textblob] we used [MLflow](https://www.mlflow.org/) [@mlflow]. The code is available on Github [https://github.com/thematic.git](https://github.com/thematic.git). 


Next, we demonstrate the effect of customized data cleaning on the business descriptions through word cloud. The panel A in figure 1 \@ref(fig:fig1) shows the word frequency of business description without customized data cleaning. The panel B in figure 1 shows the word frequency of business description without customized data cleaning, which removes non-informative words like company. 

```{r fig1, layout = "l-body-outset", fig.cap="Wordcloud comparison showing effect of customized data cleaning"}
knitr::include_graphics("figs/g6774.png")
```

 
# Results

```{r dendo, layout = "l-body-outset", fig.cap = "The figure shows the final cluster groups based on the business description"}
knitr::include_graphics("figs/dendrogram.png")
```


```{r wc1}
library(tidyverse)
library(glue)
library(quanteda)
library(quanteda.textplots)
df <- read_csv("../data/forreport.csv")
corp <- corpus(df, text_field = "business_desc")
```

```{r wc, layout = "l-body-outset", fig.cap = "The wordcloud showing comparison of words in cluster in red"}
corp %>%
    tokens(remove_punct = TRUE) %>%
    dfm() %>%
    dfm_group(groups = sector) %>%
    dfm_trim(verbose = FALSE) %>%
    textplot_wordcloud(comparison = TRUE,
                       min_size = 1,
                       max_size = 6,
                       min_count = 1, 
                       color = c('#a6cee3','#1f78b4','#b2df8a','#33a02c'))
```


# Conclusion

In this report we described the methodology of finding peers through business description. However, the results are limited by input data, the method can yield far detailed result using commercial data vendors like [Refinitiv](https://www.refinitiv.com/en) and using business descriptions from Annual reports.  

